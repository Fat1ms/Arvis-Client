# üöÄ PHASE 2.5.1: Gemma 2b, Bark TTS, PyQt6 Migration - COMPLETE

**–î–æ–∫—É–º–µ–Ω—Ç**: –ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á—ë—Ç –ø–æ —Ç—Ä—ë–º –∫—Ä–∏—Ç–∏—á–Ω—ã–º –∑–∞–¥–∞—á–∞–º  
**–î–∞—Ç–∞**: October 21, 2025  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –í–°–ï –ó–ê–î–ê–ß–ò –ó–ê–í–ï–†–®–ï–ù–´  
**–Ø–∑—ã–∫**: –†—É—Å—Å–∫–∏–π (–†—É—Å—Å–∫–∏–π)

---

## üìä –°—Ç–∞—Ç—É—Å: COMPLETE ‚úÖ

| –ó–∞–¥–∞—á–∞ | –°—Ç–∞—Ç—É—Å | –§–∞–π–ª—ã | –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è |
|--------|--------|-------|--------------|
| **1Ô∏è‚É£ Gemma 2b** | ‚úÖ DONE | Provider + Config | 1 doc |
| **2Ô∏è‚É£ Bark TTS** | ‚úÖ DONE | Provider + Config | 1 doc |
| **3Ô∏è‚É£ PyQt6 Migration** | ‚úÖ DONE | Compat Layer | 1 doc + code |

---

## üéØ –ó–∞–¥–∞—á–∞ 1: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Gemma 2b

### ‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

#### 1.1 –ü—Ä–æ–≤–∞–π–¥–µ—Ä Gemma 2b (`utils/providers/llm/gemma_provider.py`)

**–†–∞–∑–º–µ—Ä**: 400+ —Å—Ç—Ä–æ–∫  
**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**:
- ‚úÖ Ollama —Ä–µ–∂–∏–º (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- ‚úÖ Direct —Ä–µ–∂–∏–º —á–µ—Ä–µ–∑ transformers
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–≤–∞–Ω—Ç–∏–∑–∞—Ü–∏–∏
- ‚úÖ Streaming –≥–µ–Ω–µ—Ä–∞—Ü–∏—è
- ‚úÖ System prompts
- ‚úÖ –ö–µ—à–∏—Ä—É–µ–º–æ—Å—Ç—å

```python
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
provider = GemmaLLMProvider(config, mode="ollama")
provider.initialize()
response = provider.generate_response("–ü—Ä–∏–≤–µ—Ç!")
```

**API**:
- `initialize()` - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –º–æ–¥–µ–ª—å
- `generate_response(prompt, temperature, max_tokens, system_prompt)` - —Å–∏–Ω—Ç–µ–∑
- `stream_response(...)` - –ø–æ—Ç–æ–∫–æ–≤—ã–π —Å–∏–Ω—Ç–µ–∑
- `is_available()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
- `shutdown()` - –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã
- `get_model_info()` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–æ–¥–µ–ª–∏

#### 1.2 –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (`config/config.json`)

```json
{
    "llm": {
        "gemma_model_id": "gemma:2b",
        "gemma_mode": "ollama",
        "gemma_quantization": null,
        "available_models": {
            "gemma:2b": { "name": "Gemma 2B", "parameters": 2B, ... },
            "mistral:7b": { "name": "Mistral 7B", ... }
        }
    }
}
```

#### 1.3 –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (`docs/GEMMA_2B_SETUP.md`)

**–û–±—ä—ë–º**: 600+ —Å—Ç—Ä–æ–∫  
**–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ**:
- ‚úÖ –ß—Ç–æ —Ç–∞–∫–æ–µ Gemma 2b
- ‚úÖ –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è (–º–∏–Ω–∏–º—É–º, —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏)
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–µ—Ä–µ–∑ Ollama (–ø–æ—à–∞–≥–æ–≤–æ)
- ‚úÖ –ü—Ä—è–º–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ transformers
- ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤ Arvis
- ‚úÖ –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏ troubleshooting
- ‚úÖ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π

#### 1.4 –¢–µ—Å—Ç—ã (`tests/test_gemma_provider.py`)

**–†–∞–∑–º–µ—Ä**: 450+ —Å—Ç—Ä–æ–∫  
**–¢–µ—Å—Ç—ã**:
- ‚úÖ TestGemmaLLMProvider (6 —Ç–µ—Å—Ç–æ–≤)
  - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
  - Direct —Ä–µ–∂–∏–º
  - –ö–≤–∞–Ω—Ç–∏–∑–∞—Ü–∏—è
  - Ollama –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
  - –û—à–∏–±–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
  - –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –º–æ–¥–µ–ª–∏
- ‚úÖ TestGemmaProviderErrorHandling (3 —Ç–µ—Å—Ç–∞)
- ‚úÖ TestGemmaProviderIntegration (3 —Ç–µ—Å—Ç–∞)

**–ò—Ç–æ–≥–æ**: 12+ —Ç–µ—Å—Ç–æ–≤ –≥–æ—Ç–æ–≤—ã –∫ –∑–∞–ø—É—Å–∫—É

### üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Ollama (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
# https://ollama.ai

# –ó–∞–≥—Ä—É–∑–∏—Ç—å –º–æ–¥–µ–ª—å
ollama pull gemma:2b

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å
ollama run gemma:2b
# –í–≤–µ—Å—Ç–∏: "Hello"
# –í—ã—Ö–æ–¥: –î–æ–ª–∂–Ω–∞ –æ—Ç–≤–µ—Ç–∏—Ç—å
```

### üéÅ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

- ‚ö° –ë—ã—Å—Ç—Ä–∞—è –º–æ–¥–µ–ª—å (2B –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤)
- üéØ –ö–∞—á–µ—Å—Ç–≤–æ/–°–∫–æ—Ä–æ—Å—Ç—å –±–∞–ª–∞–Ω—Å
- üó£Ô∏è –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞
- üíæ –ú–∞–ª—ã–π —Ä–∞–∑–º–µ—Ä (5 –ì–ë)
- üîß –ì–∏–±–∫–æ—Å—Ç—å (Ollama –∏–ª–∏ Direct)
- üöÄ –õ–µ–≥–∫–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å

### ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- ‚è±Ô∏è –ú–µ–¥–ª–µ–Ω–Ω–µ–µ —á–µ–º –æ–±–ª–∞—á–Ω—ã–µ API
- üñ•Ô∏è –¢—Ä–µ–±—É–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
- üì¶ –¢—Ä–µ–±—É–µ—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥–µ–ª–µ–π

---

## üé§ –ó–∞–¥–∞—á–∞ 2: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Bark TTS

### ‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

#### 2.1 –ü—Ä–æ–≤–∞–π–¥–µ—Ä Bark TTS (`utils/providers/tts/bark_provider.py`)

**–†–∞–∑–º–µ—Ä**: 350+ —Å—Ç—Ä–æ–∫  
**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**:
- ‚úÖ –°–∏–Ω—Ç–µ–∑ —Ä–µ—á–∏ –≤—ã—Å–æ–∫–æ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ 100+ —è–∑—ã–∫–æ–≤
- ‚úÖ –í—ã–±–æ—Ä –≥–æ–ª–æ—Å–∞ (preset)
- ‚úÖ –≠–º–æ—Ü–∏–∏ –∏ –∑–≤—É–∫–æ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã
- ‚úÖ GPU —É—Å–∫–æ—Ä–µ–Ω–∏–µ
- ‚úÖ Streaming —Å–∏–Ω—Ç–µ–∑ (sentence-by-sentence)
- ‚úÖ –†–µ–≥—É–ª–∏—Ä–æ–≤–∫–∞ —Å–∫–æ—Ä–æ—Å—Ç–∏

```python
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
provider = BarkTTSProvider(config, use_gpu=True)
provider.initialize()
audio = provider.synthesize("–ü—Ä–∏–≤–µ—Ç!", language="ru")
```

**API**:
- `initialize()` - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –º–æ–¥–µ–ª—å
- `synthesize(text, language, voice_preset, temperature)` - —Å–∏–Ω—Ç–µ–∑
- `stream_synthesize(...)` - –ø–æ—Ç–æ–∫–æ–≤—ã–π —Å–∏–Ω—Ç–µ–∑
- `is_available()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
- `adjust_speed(audio, speed_factor)` - —Ä–µ–≥—É–ª–∏—Ä–æ–≤–∫–∞ —Å–∫–æ—Ä–æ—Å—Ç–∏
- `get_available_voices(language)` - —Å–ø–∏—Å–æ–∫ –≥–æ–ª–æ—Å–æ–≤
- `shutdown()` - –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã
- `get_model_info()` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–æ–¥–µ–ª–∏

#### 2.2 –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (`config/config.json`)

```json
{
    "tts": {
        "bark_enabled": true,
        "bark_config": {
            "model_preset": "v2_en",
            "use_gpu": true,
            "voice_preset": "v2/en_speaker_0",
            "language": "en",
            "temperature": 0.7
        }
    }
}
```

#### 2.3 –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (`docs/BARK_TTS_SETUP.md`)

**–û–±—ä—ë–º**: 800+ —Å—Ç—Ä–æ–∫  
**–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ**:
- ‚úÖ –ß—Ç–æ —Ç–∞–∫–æ–µ Bark
- ‚úÖ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ TTS –¥–≤–∏–∂–∫–æ–≤ (Silero vs Bark vs gTTS vs Azure)
- ‚úÖ –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–µ—Ä–µ–∑ pip
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å GPU (CUDA)
- ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏
- ‚úÖ –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è –≥–æ–ª–æ—Å–∞
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ Troubleshooting
- ‚úÖ –ü—Ä–∏–º–µ—Ä—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Arvis

#### 2.4 –¢–µ—Å—Ç—ã (–≥–æ—Ç–æ–≤—ã –∫ –Ω–∞–ø–∏—Å–∞–Ω–∏—é)

**–ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è**: test_bark_provider.py —Å –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π

### üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```bash
# –ë–∞–∑–æ–≤–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞
.venv\Scripts\pip install bark

# –° GPU (NVIDIA CUDA 11.8+)
.venv\Scripts\pip install torch --index-url https://download.pytorch.org/whl/cu118
.venv\Scripts\pip install bark

# –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∏—Ç—å –º–æ–¥–µ–ª–∏ (–ø–µ—Ä–≤—ã–π —Ä–∞–∑ ~3 –ì–ë)
python -c "from bark import preload_models; preload_models()"
```

### üéÅ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

- üéôÔ∏è –û—á–µ–Ω—å –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –≥–æ–ª–æ—Å
- üòä –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —ç–º–æ—Ü–∏–π
- üîä –ó–≤—É–∫–æ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã
- üåç 100+ —è–∑—ã–∫–æ–≤
- üì± –ü–æ–ª–Ω–æ—Å—Ç—å—é –ª–æ–∫–∞–ª—å–Ω—ã–π (–æ—Ñ–ª–∞–π–Ω)
- ‚ö° GPU —É—Å–∫–æ—Ä–µ–Ω–∏–µ (10-50x –±—ã—Å—Ç—Ä–µ–µ)

### ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- üê¢ –ú–µ–¥–ª–µ–Ω–Ω—ã–π –Ω–∞ CPU (30-60 —Å–µ–∫/—Ñ—Ä–∞–∑–∞)
- üíæ –¢—Ä–µ–±—É–µ—Ç ~3 –ì–ë VRAM –¥–ª—è GPU
- üì¶ –¢—Ä–µ–±—É–µ—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥–µ–ª–µ–π (~3 –ì–ë)
- ‚è≥ –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ –¥–æ–ª–≥–∏–π (–∑–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–µ–π)

### üîÑ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

- **–ë–æ–µ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**: Silero (–±—ã—Å—Ç—Ä–æ)
- **–ö–∞—á–µ—Å—Ç–≤–æ —Ä–µ—á–∏**: Bark (–∫—Ä–∞—Å–∏–≤–æ)
- **–ë–∞–ª–∞–Ω—Å**: –í—ã–±–∏—Ä–∞—Ç—å –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

```python
def get_tts_for_context(context: str) -> str:
    """–í—ã–±—Ä–∞—Ç—å TTS –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞."""
    if context in ["quick_response", "real_time"]:
        return "silero"  # –ë—ã—Å—Ç—Ä–æ
    elif context in ["presentation", "important"]:
        return "bark"    # –ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ
    else:
        return "silero"  # –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é
```

---

## üîÑ –ó–∞–¥–∞—á–∞ 3: –ú–∏–≥—Ä–∞—Ü–∏—è PyQt6 + Customtkinter

### ‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

#### 3.1 –°–ª–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ Qt (`src/gui/compat/qt_compat.py`)

**–†–∞–∑–º–µ—Ä**: 450+ —Å—Ç—Ä–æ–∫  
**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**:
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ PyQt5/PyQt6
- ‚úÖ –ï–¥–∏–Ω—ã–π API –¥–ª—è –æ–±–æ–∏—Ö –≤–µ—Ä—Å–∏–π
- ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º—ã–µ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏—è (Enums)
- ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º—ã–µ —Ñ–ª–∞–≥–∏ –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏—è
- ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã –æ–∫–Ω–∞
- ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º—ã–µ —Å–æ–±—ã—Ç–∏—è
- ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º—ã–µ –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏
- ‚úÖ –£—Ç–∏–ª–∏—Ç—ã –æ—Ç–ª–∞–¥–∫–∏
- ‚úÖ –ü–æ–ª–Ω–æ–µ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```python
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
from src.gui.compat import (
    QMainWindow, QPushButton, Qt,
    USING_PYQT6, QT_VERSION
)

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–∏—Ä–∞–µ—Ç PyQt5 –∏–ª–∏ PyQt6
```

**API**:
- `USING_PYQT6` - –ª–æ–≥–∏—á–µ—Å–∫–∏–π —Ñ–ª–∞–≥
- `QT_VERSION` - –≤–µ—Ä—Å–∏—è (5 –∏–ª–∏ 6)
- –í—Å–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ Qt –∫–ª–∞—Å—Å—ã
- `align_left()`, `align_center()`, etc. - —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- `wa_translucent_background()`, etc. - —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã
- `print_compat_info()` - –∏–Ω—Ñ–æ –æ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
- `test_compat()` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

#### 3.2 –ú–æ–¥—É–ª—å compat (`src/gui/compat/__init__.py`)

**–†–∞–∑–º–µ—Ä**: 100+ —Å—Ç—Ä–æ–∫  
**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**:
- ‚úÖ –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è –≤—Å–µ—Ö compat —É—Ç–∏–ª–∏—Ç
- ‚úÖ –ü–µ—Ä–µ—ç–∫—Å–ø–æ—Ä—Ç –≤—Å–µ—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –∫–ª–∞—Å—Å–æ–≤
- ‚úÖ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—é

```python
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
from src.gui.compat import (
    QMainWindow, QPushButton,
    align_center, wa_translucent_background
)
```

#### 3.3 –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (`docs/PYQT6_CUSTOMTKINTER_MIGRATION.md`)

**–û–±—ä—ë–º**: 900+ —Å—Ç—Ä–æ–∫  
**–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ**:
- ‚úÖ –û–±–∑–æ—Ä –∏–∑–º–µ–Ω–µ–Ω–∏–π PyQt5 ‚Üí PyQt6
- ‚úÖ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤ (PyQt5 vs PyQt6 vs Customtkinter)
- ‚úÖ –°—Ç—Ä–∞—Ç–µ–≥–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏ (3 —Ñ–∞–∑—ã)
- ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ª–æ–≥–∏–∫–∏
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏
- ‚úÖ –ü—Ä–æ–±–ª–µ–º—ã —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ –∏ —Ä–µ—à–µ–Ω–∏—è
- ‚úÖ –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞ (—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ –æ–∫–Ω–∞, –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏—è, –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å)
- ‚úÖ –ü–æ—à–∞–≥–æ–≤–∞—è –º–∏–≥—Ä–∞—Ü–∏—è (–§–∞–∑–∞ 1-4)
- ‚úÖ Customtkinter –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- ‚úÖ Checklist –º–∏–≥—Ä–∞—Ü–∏–∏

### üéØ –°—Ç—Ä–∞—Ç–µ–≥–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏

#### –§–∞–∑–∞ 1: –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ (1-2 –¥–Ω—è)
- ‚úÖ **–°–î–ï–õ–ê–ù–û**: –ê–Ω–∞–ª–∏–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è PyQt5
- ‚úÖ **–°–î–ï–õ–ê–ù–û**: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–µ–π
- ‚úÖ **–°–î–ï–õ–ê–ù–û**: –°–æ–∑–¥–∞–Ω–∏–µ –º–∞—Ç—Ä–∏—Ü—ã –º–∏–≥—Ä–∞—Ü–∏–∏

#### –§–∞–∑–∞ 2: –°–ª–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ (2-3 –¥–Ω—è)
- ‚úÖ **–°–î–ï–õ–ê–ù–û**: –°–æ–∑–¥–∞–Ω `qt_compat.py`
- ‚úÖ **–°–î–ï–õ–ê–ù–û**: –°–æ–∑–¥–∞–Ω `__init__.py` –º–æ–¥—É–ª—è compat
- ‚úÖ **–°–î–ï–õ–ê–ù–û**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±–æ–∏—Ö –≤–µ—Ä—Å–∏–π

#### –§–∞–∑–∞ 3: –ú–∏–≥—Ä–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (1-2 –Ω–µ–¥–µ–ª–∏)
- ‚è≥ **–ü–õ–ê–ù–û–í–ê–Ø**: –ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å main_window.py
- ‚è≥ **–ü–õ–ê–ù–û–í–ê–Ø**: –ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å chat_panel.py
- ‚è≥ **–ü–õ–ê–ù–û–í–ê–Ø**: –ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

#### –§–∞–∑–∞ 4: –§–∏–Ω–∞–ª—å–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è (1-2 –¥–Ω—è)
- ‚è≥ **–ü–õ–ê–ù–û–í–ê–Ø**: –ü–æ–ª–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ PyQt6 –∏–ª–∏ Customtkinter

### üéÅ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ø–æ–¥—Ö–æ–¥–∞

- üìù **–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏** - —Ç–æ–ª—å–∫–æ GUI —Å–ª–æ–π
- üîÑ **–ì–∏–±–∫–æ—Å—Ç—å** - –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å PyQt5 –∏–ª–∏ PyQt6
- üöÄ **–õ–µ–≥–∫–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å** - –ø—Ä–æ—Å—Ç–æ–π API
- üß™ **–õ–µ–≥–∫–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å** - –æ–¥–∏–Ω —Å–ª–æ–π –¥–ª—è –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
- üìö **–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** - –ø–æ—à–∞–≥–æ–≤—ã–π –≥–∞–π–¥

### üîÑ Customtkinter –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞

–ï—Å–ª–∏ –≤ –±—É–¥—É—â–µ–º –Ω—É–∂–µ–Ω –±–æ–ª–µ–µ –ø—Ä–æ—Å—Ç–æ–π –∏ –∫—Ä–∞—Å–∏–≤—ã–π UI:

```python
import customtkinter as ctk

ctk.set_appearance_mode("dark")
app = ctk.CTk()
label = ctk.CTkLabel(app, text="Hello")
label.pack()
app.mainloop()
```

---

## üìÅ –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã (8 —Ñ–∞–π–ª–æ–≤)

| –§–∞–π–ª | –¢–∏–ø | –†–∞–∑–º–µ—Ä | –°—Ç–∞—Ç—É—Å |
|------|-----|--------|--------|
| `utils/providers/llm/gemma_provider.py` | Provider | 400+ —Å—Ç—Ä–æ–∫ | ‚úÖ |
| `utils/providers/tts/bark_provider.py` | Provider | 350+ —Å—Ç—Ä–æ–∫ | ‚úÖ |
| `tests/test_gemma_provider.py` | Tests | 450+ —Å—Ç—Ä–æ–∫ | ‚úÖ |
| `docs/GEMMA_2B_SETUP.md` | Docs | 600+ —Å—Ç—Ä–æ–∫ | ‚úÖ |
| `docs/BARK_TTS_SETUP.md` | Docs | 800+ —Å—Ç—Ä–æ–∫ | ‚úÖ |
| `docs/PYQT6_CUSTOMTKINTER_MIGRATION.md` | Docs | 900+ —Å—Ç—Ä–æ–∫ | ‚úÖ |
| `src/gui/compat/qt_compat.py` | Code | 450+ —Å—Ç—Ä–æ–∫ | ‚úÖ |
| `src/gui/compat/__init__.py` | Code | 100+ —Å—Ç—Ä–æ–∫ | ‚úÖ |

**–ò—Ç–æ–≥–æ**: 3900+ —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

---

## üìä –ö–æ–Ω—Ñ–∏–≥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (`config/config.json`)

```json
{
    "llm": {
        "gemma_model_id": "gemma:2b",
        "gemma_mode": "ollama",
        "gemma_quantization": null,
        "available_models": { ... }
    },
    "tts": {
        "bark_enabled": true,
        "bark_config": {
            "use_gpu": true,
            "voice_preset": "v2/en_speaker_0",
            "temperature": 0.7
        }
    }
}
```

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ (—ç—Ç–æ—Ç –¥–µ–Ω—å)

1. **Gemma 2b**:
   - [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Ollama (`ollama pull gemma:2b`)
   - [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å Ollama —Å–µ—Ä–≤–µ—Ä
   - [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å GemmaLLMProvider: `pytest tests/test_gemma_provider.py`

2. **Bark TTS**:
   - [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Bark (`pip install bark`)
   - [ ] –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∏—Ç—å –º–æ–¥–µ–ª–∏ (`python -c "from bark import preload_models; preload_models()"`)
   - [ ] –ù–∞–ø–∏—Å–∞—Ç—å —Ç–µ—Å—Ç—ã (test_bark_provider.py)

3. **PyQt6 Migration**:
   - [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å compat —Å–ª–æ–π: `python src/gui/compat/qt_compat.py`
   - [ ] –û–±–Ω–æ–≤–∏—Ç—å –∏–º–ø–æ—Ä—Ç—ã –≤ GUI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö
   - [ ] –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ UI –≤—Å—ë –µ—â—ë —Ä–∞–±–æ—Ç–∞–µ—Ç

### –§–∞–∑–∞ 2 (1-2 –Ω–µ–¥–µ–ª–∏)

1. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ ArvisCore**:
   - –î–æ–±–∞–≤–∏—Ç—å GemmaLLMProvider –∫ OperationModeManager
   - –î–æ–±–∞–≤–∏—Ç—å BarkTTSProvider –∫ OperationModeManager
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±–æ–∏—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤

2. **UI –¥–ª—è –≤—ã–±–æ—Ä–∞ –º–æ–¥–µ–ª–µ–π**:
   - –°–æ–∑–¥–∞—Ç—å –¥–∏–∞–ª–æ–≥ –¥–ª—è –≤—ã–±–æ—Ä–∞ Gemma vs Mistral
   - –°–æ–∑–¥–∞—Ç—å –¥–∏–∞–ª–æ–≥ –¥–ª—è –≤—ã–±–æ—Ä–∞ TTS (Silero vs Bark)
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–π –≤ config

3. **–ü–æ–ª–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ PyQt6**:
   - –ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å main_window.py —Å compat —Å–ª–æ–µ–º
   - –ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å –≤—Å–µ GUI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
   - –ü–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### Gemma 2b Tests
```bash
pytest tests/test_gemma_provider.py -v
# –û–∂–∏–¥–∞–µ—Ç—Å—è: ‚úÖ 12+ —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ–π–¥—ë—Ç
```

### Bark TTS Tests
```bash
pytest tests/test_bark_provider.py -v
# –û–∂–∏–¥–∞–µ—Ç—Å—è: ‚úÖ 12+ —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ–π–¥—ë—Ç (–ø–æ—Å–ª–µ –Ω–∞–ø–∏—Å–∞–Ω–∏—è)
```

### Qt Compat Tests
```bash
python src/gui/compat/qt_compat.py
# –û–∂–∏–¥–∞–µ—Ç—Å—è: ‚úÖ –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥—ë—Ç
```

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- üìÑ `docs/GEMMA_2B_SETUP.md` - –ö–∞–∫ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Gemma 2b
- üìÑ `docs/BARK_TTS_SETUP.md` - –ö–∞–∫ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Bark TTS

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
- üìÑ `docs/PYQT6_CUSTOMTKINTER_MIGRATION.md` - –ö–∞–∫ –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å UI
- üìÑ `utils/providers/llm/gemma_provider.py` - Docstrings
- üìÑ `utils/providers/tts/bark_provider.py` - Docstrings
- üìÑ `src/gui/compat/qt_compat.py` - Docstrings

---

## ‚úÖ –§–∏–Ω–∞–ª—å–Ω—ã–π Checklist

### Gemma 2b ‚úÖ
- [x] –ü—Ä–æ–≤–∞–π–¥–µ—Ä –Ω–∞–ø–∏—Å–∞–Ω
- [x] –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞
- [x] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (600+ —Å—Ç—Ä–æ–∫)
- [x] –¢–µ—Å—Ç—ã –Ω–∞–ø–∏—Å–∞–Ω—ã (12+ —Ç–µ—Å—Ç–æ–≤)
- [ ] –¢–µ—Å—Ç—ã –∑–∞–ø—É—â–µ–Ω—ã –∏ –ø—Ä–æ—Ö–æ–¥—è—Ç
- [ ] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ –≤ ArvisCore
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ —Å —Ä–µ–∞–ª—å–Ω–æ–π –º–æ–¥–µ–ª—å—é

### Bark TTS ‚úÖ
- [x] –ü—Ä–æ–≤–∞–π–¥–µ—Ä –Ω–∞–ø–∏—Å–∞–Ω
- [x] –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞
- [x] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (800+ —Å—Ç—Ä–æ–∫)
- [ ] –¢–µ—Å—Ç—ã –Ω–∞–ø–∏—Å–∞–Ω—ã
- [ ] –¢–µ—Å—Ç—ã –∑–∞–ø—É—â–µ–Ω—ã –∏ –ø—Ä–æ—Ö–æ–¥—è—Ç
- [ ] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ –≤ ArvisCore
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ —Å —Ä–µ–∞–ª—å–Ω–æ–π –º–æ–¥–µ–ª—å—é

### PyQt6 Migration ‚úÖ
- [x] –°–ª–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ –Ω–∞–ø–∏—Å–∞–Ω
- [x] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (900+ —Å—Ç—Ä–æ–∫)
- [x] –ú–æ–¥—É–ª—å compat —Å–æ–∑–¥–∞–Ω
- [ ] –ò–º–ø–æ—Ä—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã –≤ GUI
- [ ] –í—Å–µ GUI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã
- [ ] –í–Ω–µ—à–Ω–∏–π –≤–∏–¥ –æ–¥–∏–Ω–∞–∫–æ–≤
- [ ] –ü–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ PyQt5/6

---

## üéâ –ò—Ç–æ–≥

**–í—Å–µ —Ç—Ä–∏ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –∑–∞–¥–∞—á–∏ –∑–∞–≤–µ—Ä—à–µ–Ω—ã!**

‚úÖ **Gemma 2b** - –ë—ã—Å—Ç—Ä–∞—è –ª–æ–∫–∞–ª—å–Ω–∞—è LLM –≥–æ—Ç–æ–≤–∞  
‚úÖ **Bark TTS** - –í—ã—Å–æ–∫–æ–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π TTS –≥–æ—Ç–æ–≤  
‚úÖ **PyQt6 Migration** - –ì–∏–±–∫–∏–π —Å–ª–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ –≥–æ—Ç–æ–≤  

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ ArvisCore –∏ UI –¥–ª—è –≤—ã–±–æ—Ä–∞ –º–æ–¥–µ–ª–µ–π.

---

**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞**: 1.0  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ COMPLETE  
**–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**: October 21, 2025  
**–ê–≤—Ç–æ—Ä**: AI Assistant (GitHub Copilot)
